
#include "daydreamer.h"

/*
 * Random values for producing Zobrist keys.
 * Values taken directly from Crafty.
 */
const hashkey_t piece_random[2][7][64] = {
  {
    { 0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL },
    { 0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0xd1fc122dd721044cULL,
      0xa4159629bd0ce70eULL, 0xab5da9e9ae24ad63ULL, 0x32e60a2983d1c843ULL,
      0x3c3cf99dabf131aaULL, 0xd83283085553e1fdULL, 0x180370f4abada20fULL,
      0xa7db417ed5cef0f6ULL, 0x8940b08b9b2fc0d4ULL, 0x852d84b34edc83d2ULL,
      0x068d4a5f2548652fULL, 0x35ce432f12163d2eULL, 0xc9ba66fee4843746ULL,
      0xabccc0992b67af9eULL, 0x217f1caa6a824b26ULL, 0x4a05addc1ea2e944ULL,
      0xfe2312497bf4c414ULL, 0x8495248ab305ee8fULL, 0xcb96c4247c24e036ULL,
      0xab76533d29e3c6eaULL, 0xc0944c15e3c09778ULL, 0x1053b4ccf6c024d6ULL,
      0x8d96dda010ba133aULL, 0x9f59cef04505da02ULL, 0x581ae15866c42214ULL,
      0x3a61654f9da998bfULL, 0x47efd3ec19fb73c0ULL, 0x2126b228fdb69cb5ULL,
      0xbb2ff9574df0d641ULL, 0x32b9d1ed571b84b8ULL, 0x4f688c6727828a1fULL,
      0x576784e75cc9d113ULL, 0x15e82e121ffd9115ULL, 0xbc0156dbcef2a7deULL,
      0x6365ce9628bd842eULL, 0x3a898fc4ece11b80ULL, 0xa6f7652af004d29fULL,
      0x5fa9ca7e22d71d72ULL, 0x5a06111a2088be1fULL, 0x05aae96e3384dfe4ULL,
      0xe697a8f517ab3d3fULL, 0x9d3c1d1302e84551ULL, 0x6e0b75ab4901a6c9ULL,
      0xd35c48fba6cf7eefULL, 0xc8ee1ca11e20a35eULL, 0x382637115387cc68ULL,
      0x8d499580f4544852ULL, 0x1e4a273c98576ebdULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL },
    { 0x2009a159d9509cb5ULL, 0x5fa8c13086419e55ULL, 0xea13669343bcd4b9ULL,
      0x3e47b851efbef3a4ULL, 0x6caa31dec6814cc6ULL, 0x992161e6ef2c2919ULL,
      0x8bed069c11856a55ULL, 0x5c73de210d683e98ULL, 0xa7185f2616bd83c1ULL,
      0xd7c04ef29cf3751eULL, 0x9f46f244eaf78bcfULL, 0x38f85c7bcda11a85ULL,
      0x22f1e6aabfe845aaULL, 0xa8aa67f9237dbb68ULL, 0x90e2e582b1c84a64ULL,
      0x5c685bafc31b3c9fULL, 0xc031fe468f6f6967ULL, 0x8d75aa382752602aULL,
      0x244475599eceffd5ULL, 0x0d0cfcd52bb265d4ULL, 0xda433164b4750dc1ULL,
      0x85dfeab10d5752d6ULL, 0x7225a1188a0376ebULL, 0xa8be7b123a102607ULL,
      0x603b914a4429875eULL, 0x399be2aedab54c3bULL, 0x58d916991d8a5cc4ULL,
      0x35b8f864e4685bdbULL, 0x46739c9baf790ac0ULL, 0xd1327ef186fb215aULL,
      0x140368fd88e26668ULL, 0xd38e499b69fa1e25ULL, 0xc96f5a7d211f3f9fULL,
      0x97655506a678b4bcULL, 0x7f8ddfb015f07d87ULL, 0xbf7bfed396840428ULL,
      0xfd2f0668eb41e684ULL, 0x24936e7db2759b2dULL, 0x267a311ebcd14f08ULL,
      0xf5a13e0e1d60b856ULL, 0x69f15803d26af16aULL, 0x82fac9552fa58953ULL,
      0xd71ea59c19c54beaULL, 0x62fdb302c66279d4ULL, 0xf0c1baa7e1513de5ULL,
      0x363454db33ee5ef4ULL, 0xab4045843a34f2e0ULL, 0x73f10c94a39100fdULL,
      0x0a86593ec58517e8ULL, 0xae96e568385585deULL, 0x608a57252ef6f020ULL,
      0x39cac56cc61f3368ULL, 0x44a6a43e32a682b4ULL, 0xa085261969416c01ULL,
      0xbb870177729e6283ULL, 0x1276bdc2fc1b7238ULL, 0x77bcdc0127c4da80ULL,
      0xbf16bb430520dde5ULL, 0x153a63a94e385bddULL, 0x95104c33771f4a98ULL,
      0xb0ff0dfa8ef47265ULL, 0xc48762efcfbadae4ULL, 0xf70e5b4dae84cfd0ULL,
      0x250cabf0859b323bULL },
    { 0xf71c3f6b2fd5891cULL, 0x5d5675218dd4da7eULL, 0xd8e7b9cd991893a1ULL,
      0xe4e1af2cf1bcb046ULL, 0xa762655491b63283ULL, 0xd8dc072d881ba73aULL,
      0xdb9cdd7d25570179ULL, 0x76618a18da1cfd9aULL, 0xe4ed6cee7fb62d0cULL,
      0xfebc55cf05ef2fbfULL, 0x9a9f5c4a59c51554ULL, 0xea91c3d8f98c3ecfULL,
      0x2f71c5493a5be25aULL, 0x8c4d65413c6bbfe6ULL, 0x9f06ed35f9a2eac6ULL,
      0x178831e02b8775b2ULL, 0x10a3d155d65cd6c1ULL, 0x4b7a69b028a0cd53ULL,
      0xd7b84fb5e0de02f0ULL, 0x9e266498ec93bb5cULL, 0xea0e4ad3f773090dULL,
      0x4cf4b1acc505eb02ULL, 0x11bea6e26eff78fdULL, 0x7986363d8e9c8b02ULL,
      0xff2ca02deb5af054ULL, 0x3ad2351100f322d5ULL, 0x24a21f70f0b14613ULL,
      0x475dbafc509421a2ULL, 0x9e78abd3cd79162cULL, 0xe492fd5185f74274ULL,
      0xc974fffbb9c5bcbdULL, 0x2fdc971bd1756a88ULL, 0x7229f20d9ed56e61ULL,
      0x724bb3259de1f22fULL, 0xebdba47c4a9c567aULL, 0xf93c634904fe151aULL,
      0x051bcfecd0485d42ULL, 0x94974a65ffaf78a4ULL, 0x1e2e5e3f8b50a25dULL,
      0x81b99d563b25e57aULL, 0xdae46bb9fceadb75ULL, 0xde35e8171244a7b5ULL,
      0xf4fc75ad58cca9f2ULL, 0x06396ddce8fd9c68ULL, 0x9acabf60af793fb6ULL,
      0x5329b615e95c5bdfULL, 0xd86f5fd82254a62fULL, 0xf0af6c56a32479b2ULL,
      0xca21baeeba56a815ULL, 0x0396c3624ca42a50ULL, 0xaccae9419d0f493fULL,
      0x6d148daab4ac1bb7ULL, 0xdbd78e8efc177ba2ULL, 0xcee72e2a4d16dcc6ULL,
      0x4590974f7d6ec962ULL, 0xd3b28408305b5764ULL, 0x20c201d44df1eb89ULL,
      0x0cef72d2cdef5930ULL, 0xa9e4ca60ebc9a62aULL, 0x8f84dab7d30110cdULL,
      0x6803ad1d2c809a22ULL, 0x4e3319dcbeefdd75ULL, 0xb1c8fe5b88eaedbbULL,
      0x3d5ceaecade87f00ULL },
    { 0xdb87073201334b8eULL, 0x5a37d087e1ae272bULL, 0x80b67cc99b9d27a1ULL,
      0xd09d5f7db214f4baULL, 0x3306a98928d65742ULL, 0x65bc1cc4ac254147ULL,
      0x92e266c8e0c61bd7ULL, 0x3efe1a6dd93a7ea9ULL, 0x516008fcc74b5982ULL,
      0x7087c00b1219938aULL, 0x54ed780d615a4d93ULL, 0xf7b393019e97eb56ULL,
      0x282b3182cb55067cULL, 0xf74719c6e544ea8dULL, 0x35629880486810e2ULL,
      0xccb4db1f1f298264ULL, 0x801d864f04ade5d0ULL, 0xe32ae6267b0c6f71ULL,
      0xc33dbe2c2656b326ULL, 0x8cf005f6aced02b1ULL, 0x1f4f622ce80d5b56ULL,
      0x5c5166351f09065cULL, 0x27ee88da0b3f17f3ULL, 0x24342d232e1cc60dULL,
      0xe71b0ef73358b399ULL, 0x8032078133780469ULL, 0xe34b1780fa310f3dULL,
      0xcde826ad5c866d50ULL, 0x61cbad7ae034ed02ULL, 0x7ec80dc7d5443ff8ULL,
      0x7552b2e6a70d2fefULL, 0xb5c65d387d8a622eULL, 0xcb74a3731b1404dfULL,
      0x3d17820c84c52320ULL, 0x012907839e217ebbULL, 0xeb7f86a56d1ae07aULL,
      0xf934a28184b8bc95ULL, 0xe18c5514a3ffc474ULL, 0x81e302d64f1e874aULL,
      0x993d2d29543a0051ULL, 0x4710980708601e84ULL, 0xc7301ea9cc8b59beULL,
      0x947c354adc6fc86fULL, 0xba7443084a3f3d4dULL, 0x468112e49b318b2eULL,
      0x636e353267f00946ULL, 0xae160a34615f3ce7ULL, 0xd38ce1fbfa0ae670ULL,
      0x183da8dda4081ec1ULL, 0xeccb6d0700512aa9ULL, 0xafffc8e3770d1024ULL,
      0xcc95e0c2786e2d74ULL, 0x7a889c70ef7b2d7bULL, 0xc1612de64cbd613fULL,
      0xf102a29abfbadfefULL, 0x9aa9300a182763faULL, 0x1bc552dcfcfd38a8ULL,
      0x0a7b6521e6b8170dULL, 0x2ba06c62d6b1efcdULL, 0xeea0e6daafd143a8ULL,
      0x9d02cbfd6f7cc234ULL, 0x8aecebc23d68acb5ULL, 0x1d1aa95d783617a7ULL,
      0x514e9d5763edb419ULL },
    { 0x1e8860e4e8afcffcULL, 0x107fb5302e49b653ULL, 0x453ca2eb419de2c5ULL,
      0xa3094e8eb1649123ULL, 0xe850ac9a440dd0afULL, 0xe6eb2d90ade835b6ULL,
      0x75dfa9af6b2e2517ULL, 0x89d272086a4586b0ULL, 0x04f2d543b5fdd518ULL,
      0xec4c28a9a0d6e1e7ULL, 0x17258fcd264c21dbULL, 0xf556bc18377a9614ULL,
      0x1ed98b8d00ed78d9ULL, 0x878cc5541b15235aULL, 0xbdaad05ff19daba8ULL,
      0x92847c097dfa71e5ULL, 0x350e0dd9be966d1fULL, 0xa6a60d7f6f49639cULL,
      0x8e070da95c30c7b1ULL, 0x86cfaab004eeb6baULL, 0xebaaec50d1c327f4ULL,
      0xc2fe1876ab524708ULL, 0xc6f6d37551ec8e3dULL, 0x64d37e4c261b7ceeULL,
      0x5c4238429df044d6ULL, 0xffc2dcfba6020f1cULL, 0x219884780eb85505ULL,
      0x7b344c05cf490f3cULL, 0x6357c42cdd1ece03ULL, 0xe843f0447fc918ccULL,
      0x3f6b9ecca16d6a9cULL, 0xcadd7b5fa7f80548ULL, 0x99932206ba13d48eULL,
      0x2e2c3d8d923d7498ULL, 0x313c5a25c7cc37ecULL, 0x1ad15364afedeef6ULL,
      0xfd191a29a2e31a19ULL, 0x260efed6924e37c5ULL, 0x59131a8c25dde4d2ULL,
      0x7c21c4dec49fcb54ULL, 0x7e6ce786fbf85990ULL, 0xd9e19bec0755de20ULL,
      0xbd6610b15f183afbULL, 0x8973e87e3a7c8151ULL, 0x08dc85a2ef21e267ULL,
      0x8a5d053e38e38217ULL, 0x362b10df55d34595ULL, 0xec947b5836bd99a6ULL,
      0xa86b61318e8e0669ULL, 0x77fb8d13554c503bULL, 0x7f2e977aecd4b847ULL,
      0x1a1209b4297349a0ULL, 0x246ef6a2583a91d2ULL, 0xe899f0f10718bb1bULL,
      0x8caf1fed80b0bf73ULL, 0x6692b681b5b0cd56ULL, 0x88a59e6e5279a693ULL,
      0x2bca6fda2127725bULL, 0xde231627953ee461ULL, 0xa6a84fe6019b1505ULL,
      0x3aa8d5c92821286fULL, 0x3fc7c4ff83788dc8ULL, 0x2f1c86701e11126cULL,
      0xbcf523cd44449d04ULL },
    { 0xb6bd2e675553abfbULL, 0x0e77d5c32d27b9f1ULL, 0x514eeb41d9c3d9ffULL,
      0x628b101131d29234ULL, 0x8ffb7c8ed0e68e19ULL, 0x8ae2aad5fb090e47ULL,
      0x189f977852a4f512ULL, 0x95ca324d8b0efd83ULL, 0x738c57e030fdae11ULL,
      0x959b0a940dd59306ULL, 0x65da2016543c234bULL, 0x4b832a3630d9185cULL,
      0x0c097ea2fdbf0d2cULL, 0xfb4c8e0aa5234704ULL, 0x7ac234e158f27179ULL,
      0xbac5a1e34be49be8ULL, 0x971437a9f55584bbULL, 0x0b936a48e3a2ff38ULL,
      0xce5064cedf5414ffULL, 0xe843d8e0f1a1b404ULL, 0x94b3ca3bb9a34c7fULL,
      0x2ad9eef539a002e0ULL, 0x6775351b325f3972ULL, 0x73a452a5d7816842ULL,
      0x8f820c6a3867e2f5ULL, 0x195da076e4eb0c03ULL, 0xbf06d1e5880ef7e9ULL,
      0x10194dde08d9bfb5ULL, 0xc43bf19aac12b322ULL, 0xe5574447f21ad4fbULL,
      0x0022f70230a30040ULL, 0xb92a66f9542cc415ULL, 0x8fbcd882499ec90dULL,
      0x7d7ee407c482adb5ULL, 0xf284329e4afed0eaULL, 0xa4a200b66d4b9a8fULL,
      0x9d579f70abf43ad5ULL, 0x6d99c3c17a861697ULL, 0xefdfea41ede917ffULL,
      0x0dd85b0a545ce9ebULL, 0x695f389eb81c31c4ULL, 0x3e49b5c0ed676305ULL,
      0x4c0792eaab653521ULL, 0xae7febb40ef265f8ULL, 0x735fd7bae0b300b6ULL,
      0x5cd2f906d01617fdULL, 0xe425e6a2194f35b8ULL, 0x5e454d35558f736fULL,
      0xd6f7a25040a80510ULL, 0x9ff8fd33a560058cULL, 0xc7615283555e4d1aULL,
      0x46403dffc8013c90ULL, 0x4e4a44a1479e3e2eULL, 0xc658ada906c5037bULL,
      0x54e1529f6a6c0706ULL, 0x5a929ed61f0bb3d6ULL, 0x657aacb5a4eef250ULL,
      0x8d75f946b56d5c44ULL, 0x3852aab719722cbaULL, 0xa7e416420eb9da68ULL,
      0x9b7a5005d064dd92ULL, 0xeaf7ce1d22dee993ULL, 0x34aced1247e27fb8ULL,
      0xf23478d46ca33d46ULL }},
   {{ 0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL },
    { 0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x6b90680243c4b54cULL,
      0x044703d57fb1e299ULL, 0x8a3c60812c08665aULL, 0x32dc7de4cae88a7bULL,
      0x6e3060c4bbed7feeULL, 0x09a012c21457c46fULL, 0x713f791a21ad43caULL,
      0x5a4d0ec873244cdfULL, 0x59a713355c986f8fULL, 0xa347356dba0fbfadULL,
      0x6650c485ba5b1243ULL, 0x2d86094817cc64f2ULL, 0x20fdc446a93f6201ULL,
      0x1db9308f0d27dbdfULL, 0x98f63ae9645b1111ULL, 0x03415b7672cca0bdULL,
      0x910f4a575767cff3ULL, 0x5182927aff4f928cULL, 0xdde2b660565a30dcULL,
      0x3f42ec666558c5b3ULL, 0xce05da712568cac7ULL, 0xfd9326b46e518555ULL,
      0x9334d36563994ecdULL, 0x3bd434362a7b358cULL, 0x14b4d64afc2171bbULL,
      0x8332f03346030a46ULL, 0x56300105aba021c0ULL, 0x470610c2fb63b7b5ULL,
      0x10c12cf0c2f837f5ULL, 0x7d8af8d403969661ULL, 0xa8cb40dbe096915dULL,
      0xfb306c5498354397ULL, 0xe25d9ee093992b8bULL, 0x1f406a7e77f19817ULL,
      0x06592044d4d8c7e7ULL, 0x986ca3c584c84454ULL, 0xcec495f755c884f0ULL,
      0x3d8e0276e94a3fb3ULL, 0x6dfc65f711f0e645ULL, 0xf04572c328e9c0fdULL,
      0x1de908cfe3f5fc3bULL, 0xe1e609e5214fc6f0ULL, 0x1b97e198798ccc46ULL,
      0x52983c479b769f0dULL, 0xe1ad316c24a875e2ULL, 0x759a9b5ac9742a91ULL,
      0x6bb1e5f7b2bb7e47ULL, 0xbdd56e8cc40b30baULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
      0x0000000000000000ULL },
    { 0xe543c7cd3569a2d2ULL, 0x56312cb746ff2365ULL, 0x03e7298e5b86bf22ULL,
      0x516e9a17bf3b9d0eULL, 0xb507b363062bfe41ULL, 0x7600192a061dd0e5ULL,
      0x1d3fdfd7ab7ed9eeULL, 0x422f696efd2a98f8ULL, 0x4d3652c8c76f687cULL,
      0x9f7711eae210b999ULL, 0x3fe55a4a3db93342ULL, 0xf9867077d2c22292ULL,
      0x06938ebd5352aba1ULL, 0xcfbdf8fd28e52d4aULL, 0x9f5dc89b771ea0baULL,
      0x76170ff911d3d955ULL, 0x7e7bddf4e7d92fadULL, 0x28bb97717bb86c3fULL,
      0xe14b10911730bfe5ULL, 0x65fdc8cfbb000784ULL, 0x3413b92f048583c8ULL,
      0x449ccb9483380adcULL, 0xa4a34f7dd630cec5ULL, 0xf23142fcbf290710ULL,
      0xab1645e0b73ebeb6ULL, 0x9f7ac648b66b58efULL, 0x81da786a8e1a3a07ULL,
      0xab80b2cb27644d91ULL, 0xc57b0159cd1cf77aULL, 0x84425693d1e998f6ULL,
      0xa086ad9f1b17e973ULL, 0x6c29c7100c6ea19bULL, 0x3a318a14b98d372bULL,
      0xf01ba582f9382406ULL, 0xa1cde875f370ae9cULL, 0xb9a0ab780158707eULL,
      0x8d26ff790475117eULL, 0xdd33f98a55e26ad9ULL, 0x549c9afccdff9451ULL,
      0xfed35e6c20eabe08ULL, 0xee602ea3d3b08637ULL, 0xfb60f74da1a791f3ULL,
      0xb25a86f4ba75b20eULL, 0x5402f6bd8285b194ULL, 0xb5e9f6533809151fULL,
      0x074c656721f3bb77ULL, 0x5ccdeff9d4bbbf2dULL, 0xbe262f406756394dULL,
      0x105f0a553888caadULL, 0xb364c84f9a7f366dULL, 0x13c5a20c72a2e3ceULL,
      0xb6121d22131c0104ULL, 0xa4cb87927ec6cc17ULL, 0x897b31544122583bULL,
      0xd9bed4853c502a78ULL, 0x211fee372e06645fULL, 0x87d38f49fd841678ULL,
      0x22644edaa636120aULL, 0x693c919475426cccULL, 0x77b3666bd380005dULL,
      0x09972e5b72ba54c1ULL, 0xa6d576eb8a9adbefULL, 0x151e128a1470cc43ULL,
      0xba872ea0ccbcac7cULL },
    { 0xfaadf26b0bedcb90ULL, 0x577ac5a51e5651c5ULL, 0xfaa9928d90ecc574ULL,
      0xf4d0746e2cd9c2cbULL, 0x297b213cebe4451bULL, 0xdcda00e8a1970957ULL,
      0xebc24328279cf3c0ULL, 0xafbc7b8a2782f71aULL, 0x2b8ae9d228a44b14ULL,
      0x7b91361891e74156ULL, 0x7c744bd7713ebc3cULL, 0xf30ff94d8ae2dbbcULL,
      0x952d28d81c4cd5e5ULL, 0xca1da973d1bb1a14ULL, 0x0dc59391a4b26780ULL,
      0x73974085e2ebdfedULL, 0x6a9d797790afccadULL, 0x192a2b602b123aabULL,
      0x19c8a787015bc845ULL, 0xad40920248a2e551ULL, 0xd1c0fbdcb077da5dULL,
      0xf0d3a2e4b44b9030ULL, 0x4ff44c34da7b4dd0ULL, 0x65ca4e0e02964227ULL,
      0x1fc804c725e40440ULL, 0xde8e75b6789090ffULL, 0xda82400db9d07a0aULL,
      0x7f850c159d730e8dULL, 0x88f3cb3c8b5dbf18ULL, 0xaa16f0d4828d0050ULL,
      0x46a26a52fc055ad2ULL, 0x9924d71d3d7359bfULL, 0x73580533d9f2fb99ULL,
      0x187096a491259118ULL, 0x7777434ec63d90f8ULL, 0x8e6e9922b252bdb1ULL,
      0xb1af461d516eee12ULL, 0x4fcd31f2f421c717ULL, 0x65651bc93644c5e1ULL,
      0x9bd1e1fa908307daULL, 0x5aaee550208ae7f0ULL, 0x4ec958544caaa9c3ULL,
      0x298e4a3f09caee63ULL, 0x29d4a3cab10a9a44ULL, 0x9e6a3fde44907510ULL,
      0x19cc5ee9aa4fbc78ULL, 0xc01a289fe006387fULL, 0x3ee6737f5f934fb3ULL,
      0x65fad64d232fe9eeULL, 0x2a487fc2e4f569fbULL, 0x67fb5df086391215ULL,
      0xc1b5e63af64d55e8ULL, 0xd33f764f4052ecb7ULL, 0x0899d25e2b391f79ULL,
      0xc70158cce44d2e70ULL, 0xb53262e2308fa659ULL, 0x20f7402ecd84404cULL,
      0x15d1b9bb5466ad4cULL, 0xfd8d825e26a8a2d1ULL, 0x18d96f18f8b826d0ULL,
      0xf72067659687ef21ULL, 0xf08610bafd66009fULL, 0x1a4e1ba1fdb05563ULL,
      0x1324d44c84bbef0aULL },
    { 0xc7613d66f20232d4ULL, 0x3ede983f7b06516bULL, 0x578460a649b24a39ULL,
      0xd5bd4ad2cc618853ULL, 0x6da1e9f12833259cULL, 0x1f9ca81ea33005a0ULL,
      0xae981ca25036ed10ULL, 0x5d69e428228cca9aULL, 0xa17023dd34f22effULL,
      0xd08c493917325f88ULL, 0x79e16b54bdca7e02ULL, 0x3654be3ac3a26289ULL,
      0xac56a76157fd0921ULL, 0xc517aa54a54ed12dULL, 0x4dd1b68eb1ada829ULL,
      0x161037898e176e8dULL, 0x98db096afb729bebULL, 0x03e9d68eabc9d7feULL,
      0xdf27c2fb173845dcULL, 0x2aee2474d7bf2d7cULL, 0xf5d6d12955e96f2dULL,
      0xf734ec0a2d041943ULL, 0x72999224bb580060ULL, 0xccdcad5bdc7bd1a1ULL,
      0xa9bca8004f1d7086ULL, 0xc2c7ffb795d4e1e7ULL, 0xd28da598cbfbc3caULL,
      0x08126a5da13c42d9ULL, 0x13e15ad5c2d3d951ULL, 0x4d9c20c7eaa8703dULL,
      0xab894b4e6ebca682ULL, 0x53214a10ad7c784eULL, 0x9906d6c9c38b591eULL,
      0x476bd91a4ca0c161ULL, 0x95265cbe69f01d02ULL, 0x01cedc5a39e5b5c9ULL,
      0xc0ef0788f08d9463ULL, 0x80927db966612b20ULL, 0x9630082145dd2f1eULL,
      0x600f737ed7910113ULL, 0xb9302c026f2a80b2ULL, 0xff49c8f0afc01a91ULL,
      0x39a0b9dbbc8e5d10ULL, 0x4e93e5fbc38cafd7ULL, 0x44d0aec75c666288ULL,
      0x5ea41ef6508a97efULL, 0x6ce58a3a4917dffdULL, 0x57b84b8764d3da3dULL,
      0xedf320cbe664658cULL, 0x3bea7e195d96172aULL, 0x72abd9c2b876c142ULL,
      0xaf2ce404a46dae6eULL, 0x4f050de918e728b2ULL, 0xcb458cba72881a48ULL,
      0xdadcfcb48f1c02a8ULL, 0x1167bf4ccb9f1a34ULL, 0x2f791f047047bd5dULL,
      0xcd60c5789e26b8b6ULL, 0x1a620288f4a12b4bULL, 0x1b43a4a5b7f5244dULL,
      0x3a93e22c7f6b3c55ULL, 0xa5da9b1ba501f044ULL, 0xac918f8b4d9d1e00ULL,
      0x9fba7867a63c8ac8ULL },
    { 0xb5663909d9d6303aULL, 0x1122bbd8f31a9801ULL, 0xb26dfdc7254c0ac9ULL,
      0x80923ffe2bae8db2ULL, 0xdf3939952977e95fULL, 0x89ef22889d7081a6ULL,
      0xddeeb25f2e41e526ULL, 0x77aa072d06890a48ULL, 0x8b1e7a1bc43beb1cULL,
      0xeef27b1803a60f3aULL, 0x116569c8ba82a83aULL, 0x861eddf3fdf4d64fULL,
      0x12fc5033c7c95105ULL, 0xc9997d1a2f05161aULL, 0x56dbac3597f7e48bULL,
      0x997968b0dadb71b6ULL, 0x51c153dd787cf748ULL, 0x190b253068b60e60ULL,
      0xa98dcc93091ee1daULL, 0xe7f1c48a17f0c994ULL, 0x294532d1f3b50a20ULL,
      0xe393a663d106d4b2ULL, 0xc95a8e15d4e4aac2ULL, 0x058a1a4819387af4ULL,
      0xb7fe4077025d3331ULL, 0x17369b1ad4dfb135ULL, 0xfd1836fd44897416ULL,
      0x734f98ea7a95ea1dULL, 0x44dbebde2de33051ULL, 0x3e572ff979d8ca38ULL,
      0xd53c5a45bb8cdfa1ULL, 0x1169ade998830992ULL, 0xc6b5b477d2ee43b5ULL,
      0x11d58b895af5f73aULL, 0xcfe3985db2d35d21ULL, 0xc9c6056490e28221ULL,
      0xbba44fb18d7bad4cULL, 0xd1b94354c3d22c4dULL, 0xfb0d0d4c55eedddeULL,
      0x3b18e9ef00b4c810ULL, 0x73e101f840df8084ULL, 0xd64f148443724752ULL,
      0xb017cbfb12688bd6ULL, 0x89e6a53131fc7242ULL, 0x2f6bc2d724af9792ULL,
      0x1af46d6374011c6aULL, 0xe7d461f15c6129b4ULL, 0xbd7b0f8478d446abULL,
      0x8cab2463b6c0e01dULL, 0xa69dee16a765d2b0ULL, 0x144588401f496bf3ULL,
      0x3d761d20063ee258ULL, 0x48c0b32df8ddc0fbULL, 0x1ad8889a5aa8e26cULL,
      0x2aadb6180f80c2d3ULL, 0xb7c9d582a54c0b2cULL, 0xa9448d0f698b8370ULL,
      0xd6814d04b2584c63ULL, 0x80576b83319d83f9ULL, 0x906953398a3df494ULL,
      0xe7a11b9d7d769494ULL, 0x59714b37b93b5e39ULL, 0xa5280a61ef2d0450ULL,
      0xcaf1ca6cd004e7bcULL },
    { 0x0c92df7ab48210acULL, 0x70c766782c6225c0ULL, 0x2b627e280a8dd01fULL,
      0xf8a95606e064f51bULL, 0xecb6d461dd6c8568ULL, 0xe8e9d8da88a760e7ULL,
      0xb253ddc5e1b54ff4ULL, 0xb518eacb142499c5ULL, 0x5ba23807ace2576bULL,
      0xb5d274ebd42fcb9cULL, 0x1dfc510cd7016641ULL, 0x81b2aa898d7ff740ULL,
      0xb3f8b22a412d350fULL, 0x9010d26bd30013d6ULL, 0x31a160801ed3585fULL,
      0xf18717011ddb123bULL, 0x475fb6cd262d3895ULL, 0xf86a9bada37fe981ULL,
      0x579fe8f10c63060cULL, 0x1ea46e3bcbee6f47ULL, 0x0dfa846a5626e47aULL,
      0xe76ff8e4aab118a0ULL, 0xa83a45a05758d1c4ULL, 0xff293f1d1de94a79ULL,
      0x6d34106328ce50acULL, 0x7f3dd6bb2c715f0dULL, 0x01a6483cc3fb62c0ULL,
      0xa60927ade8ccdca7ULL, 0x73c1dc8d32c0180fULL, 0x02f86bcc14474ff9ULL,
      0x3804de0c37c58434ULL, 0xfc10f3a3c497c54dULL, 0x96a1e55142ddb8dbULL,
      0xc92548d8939af17aULL, 0xbc5edf6509acaf89ULL, 0xac0b9688d3023544ULL,
      0x4163dbff847088b3ULL, 0x563f3cfce243d3f8ULL, 0x8f263f7ce1f7b3ccULL,
      0xe7365cbc6a7f8730ULL, 0x46c1f063e6b8ca39ULL, 0x21cbc42ba4582264ULL,
      0x55dff0476966e4b4ULL, 0x223e2c38b61edc4eULL, 0x3a21ced28a3d6fa8ULL,
      0xd5884ee48c058d27ULL, 0x884d4eac614c987aULL, 0x02327b02f1a6a37fULL,
      0xec14f49f926b0d1dULL, 0xad980ec0c9b3ccdcULL, 0xad0f89f58a31f96cULL,
      0x1004ad6869a8c64dULL, 0x73334f7053ecda9cULL, 0xe5c726eb2395f91fULL,
      0x3eacccee6b0d2cf0ULL, 0x54fe44475c2803fbULL, 0x4e691ecbfdff4c35ULL,
      0x0d4dd3188efdf8f3ULL, 0x4ce513f999517686ULL, 0x451033ddedb79722ULL,
      0x7fafe619290cf26eULL, 0xb744be4992d915b4ULL, 0x8011bf394690d8d1ULL,
      0x9475361b15b45cd5ULL },
  },
};

const hashkey_t castle_random[2][2][2] = {
    // [Yes/No][Black/White][King/Queen]
    {   { 0x0000000000000000ULL, 0x0000000000000000ULL },
        { 0x0000000000000000ULL, 0x0000000000000000ULL } },
    {   { 0x557723689550b69bULL, 0xc7bedab779d5361bULL },
        { 0xa92c541efa336c6cULL, 0x3bb70e80435e60b7ULL } }
};

const hashkey_t enpassant_random[64] = {
  0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
  0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
  0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
  0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
  0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
  0x0000000000000000ULL, 0xf2c1412f44c13c98ULL, 0x76b4b7ccb0c9bd1eULL,
  0x0303f047ef3166cdULL, 0xcf4da3850ff5c35aULL, 0x0bb57340632ec140ULL,
  0x189156c368616498ULL, 0x71b862b8cede277dULL, 0x26e0433817e6d7d7ULL,
  0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
  0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
  0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
  0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
  0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
  0x0000000000000000ULL, 0x1f2af0448165ab3aULL, 0x51f0d423276d44dbULL,
  0x12d51a6ba742f661ULL, 0x8fa3e91c53630e1fULL, 0x16573a4eb7f48c08ULL,
  0xe1c1e4bc9690e409ULL, 0x5f2bf4422dde33bbULL, 0xcd4cefba64f407a1ULL,
  0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
  0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
  0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
  0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
  0x0000000000000000ULL, 0x0000000000000000ULL, 0x0000000000000000ULL,
  0x0000000000000000ULL
};

hashkey_t hash_position(const position_t* pos)
{
    hashkey_t hash = 0;
    for (square_t sq=A1; sq<=H8; ++sq) {
        if (!valid_board_index(sq) || !pos->board[sq]) continue;
        hash ^= piece_hash(pos->board[sq]->piece, sq);
    }
    hash ^= ep_hash(pos);
    hash ^= castle_hash(pos);
    hash ^= side_hash(pos);
    return hash;
}
